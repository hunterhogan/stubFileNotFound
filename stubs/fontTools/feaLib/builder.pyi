from _typeshed import Incomplete
from fontTools.feaLib.ast import FeatureFile as FeatureFile
from fontTools.feaLib.error import FeatureLibError as FeatureLibError
from fontTools.feaLib.lookupDebugInfo import (
	LOOKUP_DEBUG_ENV_VAR as LOOKUP_DEBUG_ENV_VAR, LOOKUP_DEBUG_INFO_KEY as LOOKUP_DEBUG_INFO_KEY,
	LookupDebugInfo as LookupDebugInfo)
from fontTools.feaLib.parser import Parser as Parser
from fontTools.feaLib.variableScalar import VariableScalar as VariableScalar
from fontTools.misc import sstruct as sstruct
from fontTools.misc.textTools import binary2num as binary2num, safeEval as safeEval, Tag as Tag, tostr as tostr
from fontTools.otlLib.builder import (
	AlternateSubstBuilder as AlternateSubstBuilder, AnySubstBuilder as AnySubstBuilder,
	ChainContextPosBuilder as ChainContextPosBuilder, ChainContextSubstBuilder as ChainContextSubstBuilder,
	ChainContextualRule as ChainContextualRule, ClassPairPosSubtableBuilder as ClassPairPosSubtableBuilder,
	CursivePosBuilder as CursivePosBuilder, LigatureSubstBuilder as LigatureSubstBuilder,
	MarkBasePosBuilder as MarkBasePosBuilder, MarkLigPosBuilder as MarkLigPosBuilder,
	MarkMarkPosBuilder as MarkMarkPosBuilder, MultipleSubstBuilder as MultipleSubstBuilder,
	PairPosBuilder as PairPosBuilder, ReverseChainSingleSubstBuilder as ReverseChainSingleSubstBuilder,
	SinglePosBuilder as SinglePosBuilder, SingleSubstBuilder as SingleSubstBuilder)
from fontTools.otlLib.error import OpenTypeLibError as OpenTypeLibError
from fontTools.otlLib.maxContextCalc import maxCtxFont as maxCtxFont
from fontTools.ttLib import getTableModule as getTableModule, newTable as newTable
from fontTools.ttLib.tables import otBase as otBase, otTables as otTables
from fontTools.varLib.builder import buildVarDevTable as buildVarDevTable
from fontTools.varLib.errors import VarLibError as VarLibError
from fontTools.varLib.featureVars import addFeatureVariationsRaw as addFeatureVariationsRaw
from fontTools.varLib.models import normalizeValue as normalizeValue, piecewiseLinearMap as piecewiseLinearMap
from fontTools.varLib.varStore import OnlineVarStoreBuilder as OnlineVarStoreBuilder

log: Incomplete

def addOpenTypeFeatures(font, featurefile, tables=None, debug: bool = False) -> None:
    """Add features from a file to a font. Note that this replaces any features
    currently present.

    Args:
        font (feaLib.ttLib.ttFont: TTFont: The font object.
        featurefile: Either a path or file object (in which case we
            parse it into an AST), or a pre-parsed AST instance.
        tables: If passed, restrict the set of affected tables to those in the
            list.
        debug: Whether to add source debugging information to the font in the
            ``Debg`` table

    """
def addOpenTypeFeaturesFromString(font, features, filename=None, tables=None, debug: bool = False) -> None:
    """Add features from a string to a font. Note that this replaces any
    features currently present.

    Args:
        font (feaLib.ttLib.ttFont: TTFont: The font object.
        features: A string containing feature code.
        filename: The directory containing ``filename`` is used as the root of
            relative ``include()`` paths; if ``None`` is provided, the current
            directory is assumed.
        tables: If passed, restrict the set of affected tables to those in the
            list.
        debug: Whether to add source debugging information to the font in the
            ``Debg`` table

    """

class Builder:
    supportedTables: Incomplete
    font: Incomplete
    glyphMap: Incomplete
    varstorebuilder: Incomplete
    axes: Incomplete
    default_language_systems_: Incomplete
    script_: Incomplete
    lookupflag_: int
    lookupflag_markFilterSet_: Incomplete
    use_extension_: bool
    language_systems: Incomplete
    seen_non_DFLT_script_: bool
    named_lookups_: Incomplete
    cur_lookup_: Incomplete
    cur_lookup_name_: Incomplete
    cur_feature_name_: Incomplete
    lookups_: Incomplete
    lookup_locations: Incomplete
    features_: Incomplete
    required_features_: Incomplete
    feature_variations_: Incomplete
    aalt_features_: Incomplete
    aalt_location_: Incomplete
    aalt_alternates_: Incomplete
    aalt_use_extension_: bool
    featureNames_: Incomplete
    featureNames_ids_: Incomplete
    cv_parameters_: Incomplete
    cv_parameters_ids_: Incomplete
    cv_num_named_params_: Incomplete
    cv_characters_: Incomplete
    size_parameters_: Incomplete
    fontRevision_: Incomplete
    names_: Incomplete
    base_horiz_axis_: Incomplete
    base_vert_axis_: Incomplete
    attachPoints_: Incomplete
    ligCaretCoords_: Incomplete
    ligCaretPoints_: Incomplete
    glyphClassDefs_: Incomplete
    markAttach_: Incomplete
    markAttachClassID_: Incomplete
    markFilterSets_: Incomplete
    os2_: Incomplete
    hhea_: Incomplete
    vhea_: Incomplete
    stat_: Incomplete
    conditionsets_: Incomplete
    model_cache: Incomplete
    def __init__(self, font, featurefile) -> None: ...
    parseTree: Incomplete
    def build(self, tables=None, debug: bool = False) -> None: ...
    def get_chained_lookup_(self, location, builder_class): ...
    def add_lookup_to_feature_(self, lookup, feature_name) -> None: ...
    def get_lookup_(self, location, builder_class, mapping=None): ...
    def build_feature_aalt_(self) -> None: ...
    def build_head(self) -> None: ...
    def build_hhea(self) -> None: ...
    def build_vhea(self) -> None: ...
    def get_user_name_id(self, table): ...
    def buildFeatureParams(self, tag): ...
    def build_name(self) -> None: ...
    def build_OS_2(self) -> None: ...
    def setElidedFallbackName(self, value, location) -> None: ...
    def addDesignAxis(self, designAxis, location) -> None: ...
    def addAxisValueRecord(self, axisValueRecord, location) -> None: ...
    def build_STAT(self) -> None: ...
    def build_codepages_(self, pages): ...
    def buildBASE(self): ...
    def buildBASECoord(self, c): ...
    def buildBASEAxis(self, axis): ...
    def buildGDEF(self): ...
    def buildGDEFGlyphClassDef_(self): ...
    def buildGDEFMarkAttachClassDef_(self): ...
    def buildGDEFMarkGlyphSetsDef_(self): ...
    def buildDebg(self) -> None: ...
    def buildLookups_(self, tag): ...
    def makeTable(self, tag): ...
    def makeFeatureVariations(self, table, table_tag) -> None: ...
    def any_feature_variations(self, feature_tag, table_tag): ...
    def get_lookup_name_(self, lookup): ...
    def add_language_system(self, location, script, language) -> None: ...
    def get_default_language_systems_(self): ...
    def start_feature(self, location, name, use_extension: bool = False) -> None: ...
    def end_feature(self) -> None: ...
    def start_lookup_block(self, location, name, use_extension: bool = False) -> None: ...
    def end_lookup_block(self) -> None: ...
    def add_lookup_call(self, lookup_name) -> None: ...
    def set_font_revision(self, location, revision) -> None: ...
    def set_language(self, location, language, include_default, required) -> None: ...
    def getMarkAttachClass_(self, location, glyphs): ...
    def getMarkFilterSet_(self, location, glyphs): ...
    def set_lookup_flag(self, location, value, markAttach, markFilter) -> None: ...
    def set_script(self, location, script) -> None: ...
    def find_lookup_builders_(self, lookups):
        """Helper for building chain contextual substitutions

        Given a list of lookup names, finds the LookupBuilder for each name.
        If an input name is None, it gets mapped to a None LookupBuilder.
        """
    def add_attach_points(self, location, glyphs, contourPoints) -> None: ...
    def add_feature_reference(self, location, featureName) -> None: ...
    def add_featureName(self, tag) -> None: ...
    def add_cv_parameter(self, tag) -> None: ...
    def add_to_cv_num_named_params(self, tag) -> None:
        """Adds new items to ``self.cv_num_named_params_``
        or increments the count of existing items.
        """
    def add_cv_character(self, character, tag) -> None: ...
    def set_base_axis(self, bases, scripts, vertical, minmax=[]) -> None: ...
    def set_size_parameters(self, location, DesignSize, SubfamilyID, RangeStart, RangeEnd) -> None: ...
    def add_any_subst_(self, location, mapping) -> None: ...
    def add_single_subst(self, location, prefix, suffix, mapping, forceChain) -> None: ...
    def add_multiple_subst(self, location, prefix, glyph, suffix, replacements, forceChain: bool = False) -> None: ...
    def add_alternate_subst(self, location, prefix, glyph, suffix, replacement) -> None: ...
    def add_ligature_subst(self, location, prefix, glyphs, suffix, replacement, forceChain) -> None: ...
    def add_chain_context_subst(self, location, prefix, glyphs, suffix, lookups) -> None: ...
    def add_single_subst_chained_(self, location, prefix, suffix, mapping) -> None: ...
    def add_multi_subst_chained_(self, location, prefix, glyph, suffix, replacements) -> None: ...
    def add_ligature_subst_chained_(self, location, prefix, glyphs, suffix, replacement) -> None: ...
    def add_reverse_chain_single_subst(self, location, old_prefix, old_suffix, mapping) -> None: ...
    def add_single_pos(self, location, prefix, suffix, pos, forceChain) -> None: ...
    def add_class_pair_pos(self, location, glyphclass1, value1, glyphclass2, value2) -> None: ...
    def add_specific_pair_pos(self, location, glyph1, value1, glyph2, value2) -> None: ...
    def add_cursive_pos(self, location, glyphclass, entryAnchor, exitAnchor) -> None: ...
    def add_mark_base_pos(self, location, bases, marks) -> None: ...
    def add_mark_lig_pos(self, location, ligatures, components) -> None: ...
    def add_mark_mark_pos(self, location, baseMarks, marks) -> None: ...
    def add_chain_context_pos(self, location, prefix, glyphs, suffix, lookups) -> None: ...
    def add_single_pos_chained_(self, location, prefix, suffix, pos) -> None: ...
    def add_marks_(self, location, lookupBuilder, marks) -> None:
        """Helper for add_mark_{base,liga,mark}_pos."""
    def add_subtable_break(self, location) -> None: ...
    def setGlyphClass_(self, location, glyph, glyphClass) -> None: ...
    def add_glyphClassDef(self, location, baseGlyphs, ligatureGlyphs, markGlyphs, componentGlyphs) -> None: ...
    def add_ligatureCaretByIndex_(self, location, glyphs, carets) -> None: ...
    def makeLigCaret(self, location, caret): ...
    def add_ligatureCaretByPos_(self, location, glyphs, carets) -> None: ...
    def add_name_record(self, location, nameID, platformID, platEncID, langID, string) -> None: ...
    def add_os2_field(self, key, value) -> None: ...
    def add_hhea_field(self, key, value) -> None: ...
    def add_vhea_field(self, key, value) -> None: ...
    def add_conditionset(self, location, key, value) -> None: ...
    def makeVariablePos(self, location, varscalar): ...
    def makeAnchorPos(self, varscalar, deviceTable, location): ...
    def makeOpenTypeAnchor(self, location, anchor):
        """ast.Anchor --> otTables.Anchor"""
    _VALUEREC_ATTRS: Incomplete
    def makeOpenTypeValueRecord(self, location, v, pairPosContext):
        """ast.ValueRecord --> otBase.ValueRecord"""
