from _typeshed import Incomplete
from fontTools.misc.fixedTools import fixedToFloat as fixedToFloat, floatToFixed as floatToFixed, floatToFixedToStr as floatToFixedToStr, strToFixedToFloat as strToFixedToFloat
from fontTools.misc.textTools import bytechr as bytechr, byteord as byteord, bytesjoin as bytesjoin, strjoin as strjoin
from fontTools.pens.boundsPen import BoundsPen as BoundsPen

log: Incomplete

def read_operator(self, b0, data, index): ...
def read_byte(self, b0, data, index): ...
def read_smallInt1(self, b0, data, index): ...
def read_smallInt2(self, b0, data, index): ...
def read_shortInt(self, b0, data, index): ...
def read_longInt(self, b0, data, index): ...
def read_fixed1616(self, b0, data, index): ...
def read_reserved(self, b0, data, index): ...
def read_realNumber(self, b0, data, index): ...

t1OperandEncoding: Incomplete
t2OperandEncoding: Incomplete
cffDictOperandEncoding: Incomplete
realNibbles: Incomplete
realNibblesDict: Incomplete
maxOpStack: int

def buildOperatorDict(operatorList): ...

t2Operators: Incomplete

def getIntEncoder(format): ...

encodeIntCFF: Incomplete
encodeIntT1: Incomplete
encodeIntT2: Incomplete

def encodeFixed(f, pack=...):
    """For T2 only"""

realZeroBytes: Incomplete

def encodeFloat(f): ...

class CharStringCompileError(Exception): ...

class SimpleT2Decompiler:
    localSubrs: Incomplete
    localBias: Incomplete
    globalSubrs: Incomplete
    globalBias: Incomplete
    private: Incomplete
    blender: Incomplete
    def __init__(self, localSubrs, globalSubrs, private=None, blender=None) -> None: ...
    callingStack: Incomplete
    operandStack: Incomplete
    hintCount: int
    hintMaskBytes: int
    numRegions: int
    vsIndex: int
    def reset(self) -> None: ...
    def execute(self, charString, *, pushToStack=None) -> None: ...
    def pop(self): ...
    def popall(self): ...
    def push(self, value) -> None: ...
    def op_return(self, index) -> None: ...
    def op_endchar(self, index) -> None: ...
    def op_ignore(self, index) -> None: ...
    def op_callsubr(self, index) -> None: ...
    def op_callgsubr(self, index) -> None: ...
    def op_hstem(self, index) -> None: ...
    def op_vstem(self, index) -> None: ...
    def op_hstemhm(self, index) -> None: ...
    def op_vstemhm(self, index) -> None: ...
    def op_hintmask(self, index): ...
    op_cntrmask = op_hintmask
    def countHints(self) -> None: ...
    def op_and(self, index) -> None: ...
    def op_or(self, index) -> None: ...
    def op_not(self, index) -> None: ...
    def op_store(self, index) -> None: ...
    def op_abs(self, index) -> None: ...
    def op_add(self, index) -> None: ...
    def op_sub(self, index) -> None: ...
    def op_div(self, index) -> None: ...
    def op_load(self, index) -> None: ...
    def op_neg(self, index) -> None: ...
    def op_eq(self, index) -> None: ...
    def op_drop(self, index) -> None: ...
    def op_put(self, index) -> None: ...
    def op_get(self, index) -> None: ...
    def op_ifelse(self, index) -> None: ...
    def op_random(self, index) -> None: ...
    def op_mul(self, index) -> None: ...
    def op_sqrt(self, index) -> None: ...
    def op_dup(self, index) -> None: ...
    def op_exch(self, index) -> None: ...
    def op_index(self, index) -> None: ...
    def op_roll(self, index) -> None: ...
    def op_blend(self, index) -> None: ...
    def op_vsindex(self, index) -> None: ...

t1Operators: Incomplete

class T2StackUseExtractor(SimpleT2Decompiler):
    def execute(self, charString): ...

class T2WidthExtractor(SimpleT2Decompiler):
    nominalWidthX: Incomplete
    defaultWidthX: Incomplete
    def __init__(self, localSubrs, globalSubrs, nominalWidthX, defaultWidthX, private=None, blender=None) -> None: ...
    gotWidth: int
    width: int
    def reset(self) -> None: ...
    def popallWidth(self, evenOdd: int = 0): ...
    hintCount: Incomplete
    def countHints(self) -> None: ...
    def op_rmoveto(self, index) -> None: ...
    def op_hmoveto(self, index) -> None: ...
    def op_vmoveto(self, index) -> None: ...
    def op_endchar(self, index) -> None: ...

class T2OutlineExtractor(T2WidthExtractor):
    pen: Incomplete
    subrLevel: int
    def __init__(self, pen, localSubrs, globalSubrs, nominalWidthX, defaultWidthX, private=None, blender=None) -> None: ...
    currentPoint: Incomplete
    sawMoveTo: int
    def reset(self) -> None: ...
    def execute(self, charString) -> None: ...
    def _nextPoint(self, point): ...
    def rMoveTo(self, point) -> None: ...
    def rLineTo(self, point) -> None: ...
    def rCurveTo(self, pt1, pt2, pt3) -> None: ...
    def closePath(self) -> None: ...
    def endPath(self) -> None: ...
    def op_rmoveto(self, index) -> None: ...
    def op_hmoveto(self, index) -> None: ...
    def op_vmoveto(self, index) -> None: ...
    def op_endchar(self, index) -> None: ...
    def op_rlineto(self, index) -> None: ...
    def op_hlineto(self, index) -> None: ...
    def op_vlineto(self, index) -> None: ...
    def op_rrcurveto(self, index) -> None:
        """{dxa dya dxb dyb dxc dyc}+ rrcurveto"""
    def op_rcurveline(self, index) -> None:
        """{dxa dya dxb dyb dxc dyc}+ dxd dyd rcurveline"""
    def op_rlinecurve(self, index) -> None:
        """{dxa dya}+ dxb dyb dxc dyc dxd dyd rlinecurve"""
    def op_vvcurveto(self, index) -> None:
        """dx1? {dya dxb dyb dyc}+ vvcurveto"""
    def op_hhcurveto(self, index) -> None:
        """dy1? {dxa dxb dyb dxc}+ hhcurveto"""
    def op_vhcurveto(self, index) -> None:
        """dy1 dx2 dy2 dx3 {dxa dxb dyb dyc dyd dxe dye dxf}* dyf? vhcurveto (30)
        {dya dxb dyb dxc dxd dxe dye dyf}+ dxf? vhcurveto
        """
    def op_hvcurveto(self, index) -> None:
        """dx1 dx2 dy2 dy3 {dya dxb dyb dxc dxd dxe dye dyf}* dxf?
        {dxa dxb dyb dyc dyd dxe dye dxf}+ dyf?
        """
    def op_hflex(self, index) -> None: ...
    def op_flex(self, index) -> None: ...
    def op_hflex1(self, index) -> None: ...
    def op_flex1(self, index) -> None: ...
    def op_and(self, index) -> None: ...
    def op_or(self, index) -> None: ...
    def op_not(self, index) -> None: ...
    def op_store(self, index) -> None: ...
    def op_abs(self, index) -> None: ...
    def op_add(self, index) -> None: ...
    def op_sub(self, index) -> None: ...
    def op_div(self, index) -> None: ...
    def op_load(self, index) -> None: ...
    def op_neg(self, index) -> None: ...
    def op_eq(self, index) -> None: ...
    def op_drop(self, index) -> None: ...
    def op_put(self, index) -> None: ...
    def op_get(self, index) -> None: ...
    def op_ifelse(self, index) -> None: ...
    def op_random(self, index) -> None: ...
    def op_mul(self, index) -> None: ...
    def op_sqrt(self, index) -> None: ...
    def op_dup(self, index) -> None: ...
    def op_exch(self, index) -> None: ...
    def op_index(self, index) -> None: ...
    def op_roll(self, index) -> None: ...
    def alternatingLineto(self, isHorizontal) -> None: ...
    def vcurveto(self, args): ...
    def hcurveto(self, args): ...

class T1OutlineExtractor(T2OutlineExtractor):
    pen: Incomplete
    subrs: Incomplete
    def __init__(self, pen, subrs) -> None: ...
    flexing: int
    width: int
    sbx: int
    def reset(self) -> None: ...
    sawMoveTo: int
    def endPath(self) -> None: ...
    def popallWidth(self, evenOdd: int = 0): ...
    def exch(self) -> None: ...
    def op_rmoveto(self, index) -> None: ...
    def op_hmoveto(self, index) -> None: ...
    def op_vmoveto(self, index) -> None: ...
    def op_closepath(self, index) -> None: ...
    currentPoint: Incomplete
    def op_setcurrentpoint(self, index) -> None: ...
    def op_endchar(self, index) -> None: ...
    def op_hsbw(self, index) -> None: ...
    def op_sbw(self, index) -> None: ...
    def op_callsubr(self, index) -> None: ...
    def op_callothersubr(self, index) -> None: ...
    def op_pop(self, index) -> None: ...
    def doFlex(self) -> None: ...
    def op_dotsection(self, index) -> None: ...
    def op_hstem3(self, index) -> None: ...
    def op_seac(self, index) -> None:
        """asb adx ady bchar achar seac"""
    def op_vstem3(self, index) -> None: ...

class T2CharString:
    operandEncoding = t2OperandEncoding
    operators: Incomplete
    opcodes: Incomplete
    decompilerClass = SimpleT2Decompiler
    outlineExtractor = T2OutlineExtractor
    bytecode: Incomplete
    program: Incomplete
    private: Incomplete
    globalSubrs: Incomplete
    _cur_vsindex: Incomplete
    def __init__(self, bytecode=None, program=None, private=None, globalSubrs=None) -> None: ...
    def getNumRegions(self, vsindex=None): ...
    def __repr__(self) -> str: ...
    def getIntEncoder(self): ...
    def getFixedEncoder(self): ...
    def decompile(self) -> None: ...
    width: Incomplete
    def draw(self, pen, blender=None) -> None: ...
    def calcBounds(self, glyphSet): ...
    def compile(self, isCFF2: bool = False) -> None: ...
    def needsDecompilation(self): ...
    def setProgram(self, program) -> None: ...
    def setBytecode(self, bytecode) -> None: ...
    def getToken(self, index, len=..., byteord=..., isinstance=...): ...
    def getBytes(self, index, nBytes): ...
    def handle_operator(self, operator): ...
    def toXML(self, xmlWriter, ttFont=None) -> None: ...
    def fromXML(self, name, attrs, content) -> None: ...

class T1CharString(T2CharString):
    operandEncoding = t1OperandEncoding
    operators: Incomplete
    opcodes: Incomplete
    subrs: Incomplete
    def __init__(self, bytecode=None, program=None, subrs=None) -> None: ...
    def getIntEncoder(self): ...
    def getFixedEncoder(self) -> None: ...
    def decompile(self) -> None: ...
    width: Incomplete
    def draw(self, pen) -> None: ...

class DictDecompiler:
    operandEncoding = cffDictOperandEncoding
    stack: Incomplete
    strings: Incomplete
    dict: Incomplete
    parent: Incomplete
    def __init__(self, strings, parent=None) -> None: ...
    def getDict(self): ...
    def decompile(self, data) -> None: ...
    def pop(self): ...
    def popall(self): ...
    def handle_operator(self, operator) -> None: ...
    def arg_number(self, name): ...
    def arg_blend_number(self, name): ...
    def arg_SID(self, name): ...
    def arg_array(self, name): ...
    def arg_blendList(self, name):
        """
        There may be non-blend args at the top of the stack. We first calculate
        where the blend args start in the stack. These are the last
        numMasters*numBlends) +1 args.
        The blend args starts with numMasters relative coordinate values, the  BlueValues in the list from the default master font. This is followed by
        numBlends list of values. Each of  value in one of these lists is the
        Variable Font delta for the matching region.

        We re-arrange this to be a list of numMaster entries. Each entry starts with the corresponding default font relative value, and is followed by
        the delta values. We then convert the default values, the first item in each entry, to an absolute value.
        """
    def arg_delta(self, name): ...

def calcSubrBias(subrs): ...
