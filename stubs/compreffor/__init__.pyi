"""
This type stub file was generated by pyright.
"""

import logging
from fontTools.misc.loggingTools import Timer
from compreffor import cxxCompressor, pyCompressor
from ._version import version as __version__

"""
==== TTX/FontTools Compreffor ====
This module automatically subroutines the CFF table in
a TTFont object, for the purposes of compressing the
outputted font file. In addition to providing a Python
interface, this tool can be used on the command line.

Usage (python):
>> from fontTools.ttLib import TTFont
>> import compreffor
>> font = TTFont(filename)
>> options = { ... }
>> compreffor.compress(font, **options)
>> font.save(filename)

Compression Backends:
There are 2 different ways the compreffor can be run.
    - The default method is backed by a C++ extension module. The logic is
      in cxxCompressor.py, cffCompressor.h, cffCompressor.cc and
      _compreffor.pyx.
    - The second is a pure Python approach, and can be selected from `compress`
      by passing `method_python=True`. This is significantly slower than the
      the other backend (~10-20x). The logic can be found in pyCompressor.py.

Options:
When running `compreffor.compress`, options can be set using keyword arguments:
    - nrounds (integer) -- the number of market iterations to run (default: 4)
    - max_subrs (integer) -- limit to number of subrs per INDEX
                             (default: 65533)

With `method_python=True`, the following additional options are available:
    - chunk_ratio (float) -- set the percentage of charstrings
                             to be run by each process. The value must be a
                             float between 0 < n <= 1 (default: 0.1)
    - processes (integer) -- the number of simultaneous processes to run.
                             Use value 1 to perform operation serially.

Usage (command line):
From the command line, you can either run the package as a module,

$ python -m compreffor --help

Or call the `compreffor` console script installed with the package.
Use -h/--help to list all the available options.
"""
log = ...
timer = ...
def compress(ttFont, method_python=..., **options): # -> None:
    """ Subroutinize TTFont instance in-place using the C++ Compreffor.
    If 'method_python' is True, use the slower, pure-Python Compreffor.
    If the font already contains subroutines, it is first decompressed.
    """
    ...

def decompress(ttFont, **kwargs): # -> None:
    """ Use the FontTools Subsetter to desubroutinize the font's CFF table.
    Any keyword arguments are passed on as options to the Subsetter.
    Skip if the font contains no subroutines.
    """
    ...

def has_subrs(ttFont): # -> bool:
    """ Return True if the font's CFF table contains any subroutines. """
    ...

def check(original_file, compressed_file): # -> bool:
    """ Compare the original and compressed font files to confirm they are
    functionally equivalent. Also check that the Charstrings in the compressed
    font's CFFFontSet don't exceed the maximum subroutine nesting level.
    Return True if all checks pass, else return False.
    """
    ...

class Methods:
    ...


class Compreffor:
    def __init__(self, font, method=..., **options) -> None:
        ...
    
    def compress(self): # -> None:
        ...
    


