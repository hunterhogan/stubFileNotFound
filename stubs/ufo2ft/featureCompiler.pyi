"""
This type stub file was generated by pyright.
"""

from ufo2ft.featureWriters import ast

logger = ...
timer = ...
def parseLayoutFeatures(font, includeDir=...):
    """Parse OpenType layout features in the UFO and return a
    feaLib.ast.FeatureFile instance.

    includeDir is an optional directory path to search for included
    feature files, if omitted the font.path is used. If the latter
    is also not set, the feaLib Lexer uses the current working directory.
    """
    ...

def tokenizeLayoutFeatures(font, includeDir: str | None = ...) -> list[tuple[str, str]]:
    """Tokenize the font features.fea with a lexer that follows include statements.

    Comments, newlines and whitespace characters are excluded.

    Return a list of (type, token) tuples.
    """
    ...

class BaseFeatureCompiler:
    """Base class for generating OpenType features and compiling OpenType
    layout tables from these.
    """
    def __init__(self, ufo, ttFont=..., glyphSet=..., extraSubstitutions=...) -> None:
        """
        Args:
          ufo: an object representing a UFO (defcon.Font or equivalent)
            containing the features source data.
          ttFont: a fontTools TTFont object where the generated OpenType
            tables are added. If None, an empty TTFont is used, with
            the same glyph order as the ufo object.
          glyphSet: a (optional) dict containing pre-processed copies of
            the UFO glyphs.
          extraSubstitutions: an optional dictionary mapping glyph names
            to a set of other glyphs which should be considered reachable
            from them (for example when using designspace rules to effect
            substitutions).
        """
        ...
    
    def setupFeatures(self):
        """Make the features source.

        **This should not be called externally.** Subclasses
        must override this method.
        """
        ...
    
    def buildTables(self):
        """Compile OpenType feature tables from the source.

        **This should not be called externally.** Subclasses
        must override this method.
        """
        ...
    
    def setupFile_features(self): # -> None:
        """DEPRECATED. Use 'setupFeatures' instead."""
        ...
    
    def setupFile_featureTables(self): # -> None:
        """DEPRECATED. Use 'setupFeatures' instead."""
        ...
    
    def compile(self): # -> TTFont:
        ...
    


class FeatureCompiler(BaseFeatureCompiler):
    """Generate automatic features and compile OpenType tables from Adobe
    Feature File stored in the UFO, using fontTools.feaLib as compiler.
    """
    defaultFeatureWriters = ...
    def __init__(self, ufo, ttFont=..., glyphSet=..., featureWriters=..., feaIncludeDir=..., extraSubstitutions=..., **kwargs) -> None:
        """
        Args:
          featureWriters: a list of BaseFeatureWriter subclasses or
            pre-initialized instances. The default value (None) means that:
            - first, the UFO lib will be searched for a list of featureWriters
              under the key "com.github.googlei18n.ufo2ft.featureWriters"
              (see loadFeatureWriters).
            - if that is not found, the default list of writers will be used:
              (see FeatureCompiler.defaultFeatureWriters, and the individual
              feature writer classes for the list of features generated).
            If the featureWriters list is empty, no automatic feature is
            generated and only pre-existing features are compiled.
            The ``featureWriters`` parameter overrides both the writers from
            the UFO lib and the default writers list. To extend instead of
            replace the latter, the list can contain a special value ``...``
            (i.e. the ``ellipsis`` singleton, not the str literal '...')
            which gets replaced by either the UFO.lib writers or the default
            ones; thus one can insert additional writers either before or after
            these.
          feaIncludeDir: a directory to be used as the include directory for
            the feature file. If None, the include directory is set to the
            parent directory of the UFO, provided the UFO has a path.
        """
        ...
    
    def initFeatureWriters(self, featureWriters=...): # -> None:
        """Initialize feature writer classes as specified in the UFO lib.
        If none are defined in the UFO, the default feature writers are used
        (see FeatureCompiler.defaultFeatureWriters).
        The 'featureWriters' argument can be used to override these.
        The method sets the `self.featureWriters` attribute with the list of
        writers.

        Note that the writers that generate GSUB features are placed first in
        this list, before all others. This is because the GSUB table may be
        used in the subsequent feature writers to resolve substitutions from
        glyphs with unicodes to their alternates.
        """
        ...
    
    def setupFeatures(self): # -> None:
        """
        Make the features source.

        **This should not be called externally.** Subclasses
        may override this method to handle the file creation
        in a different way if desired.
        """
        ...
    
    def writeFeatures(self, outfile): # -> None:
        ...
    
    def buildTables(self): # -> None:
        """
        Compile OpenType feature tables from the source.
        Raises a FeaLibError if the feature compilation was unsuccessful.

        **This should not be called externally.** Subclasses
        may override this method to handle the table compilation
        in a different way if desired.
        """
        ...
    


class MtiFeatureCompiler(BaseFeatureCompiler):
    """Compile OpenType layout tables from MTI feature files using
    fontTools.mtiLib.
    """
    def setupFeatures(self): # -> None:
        ...
    
    def buildTables(self): # -> None:
        ...
    


def warn_about_miscased_insertion_markers(ufo_description: str, feaFile: ast.FeatureFile, patterns: set[str]) -> None:
    """Warn the user about potentially mistyped feature insertion markers."""
    ...

class VariableFeatureCompiler(FeatureCompiler):
    """Generate a variable feature file and compile OpenType tables from a
    designspace file.
    """
    def __init__(self, ufo, designspace, ttFont=..., glyphSet=..., featureWriters=..., **kwargs) -> None:
        ...
    
    def setupFeatures(self): # -> None:
        ...
    


